[
  {
    "id": "22527ece.451d52",
    "type": "tab",
    "label": "Flow 1",
    "disabled": false,
    "info": ""
  },
  {
    "id": "d3290d59.f097d",
    "type": "subflow",
    "name": "health check",
    "info": "",
    "category": "",
    "in": [{ "x": 60, "y": 60, "wires": [{ "id": "941711d7.c5afe" }] }],
    "out": [
      { "x": 860, "y": 140, "wires": [{ "id": "b63db3a2.71d8f", "port": 0 }] }
    ],
    "env": [],
    "color": "#DDAA99",
    "status": {
      "x": 320,
      "y": 60,
      "wires": [{ "id": "941711d7.c5afe", "port": 0 }]
    }
  },
  {
    "id": "5891f34c.f61f6c",
    "type": "inject",
    "z": "22527ece.451d52",
    "name": "",
    "props": [{ "p": "payload" }, { "p": "topic", "vt": "str" }],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 140,
    "y": 100,
    "wires": [["c0a6ae64.171a1"]]
  },
  {
    "id": "941711d7.c5afe",
    "type": "function",
    "z": "d3290d59.f097d",
    "name": "toggle status",
    "func": "const initValue = true;\nconst prev = flow.get('isActive');\n\nif (typeof prev !== 'boolean') {\n  flow.set('isActive', initValue);\n} else {\n  flow.set('isActive', !prev);\n}\nmsg.payload = flow.get('isActive') ? 'ðŸŸ¢' : 'ðŸš«';\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "x": 190,
    "y": 60,
    "wires": [["409d23db.d5f5bc"]]
  },
  {
    "id": "c0a6ae64.171a1",
    "type": "subflow:d3290d59.f097d",
    "z": "22527ece.451d52",
    "name": "",
    "env": [],
    "x": 310,
    "y": 100,
    "wires": [["e4d7ed06.3243b"]]
  },
  {
    "id": "e4d7ed06.3243b",
    "type": "debug",
    "z": "22527ece.451d52",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 490,
    "y": 100,
    "wires": []
  },
  {
    "id": "6fa80092.853db",
    "type": "inject",
    "z": "d3290d59.f097d",
    "name": "",
    "props": [{ "p": "topic", "vt": "str" }],
    "repeat": "60",
    "crontab": "",
    "once": true,
    "onceDelay": "10",
    "topic": "health-check",
    "payloadType": "str",
    "x": 200,
    "y": 140,
    "wires": [["409d23db.d5f5bc"]]
  },
  {
    "id": "8818bf7.1567d4",
    "type": "http in",
    "z": "d3290d59.f097d",
    "name": "",
    "url": "/health",
    "method": "get",
    "upload": false,
    "swaggerDoc": "",
    "x": 190,
    "y": 200,
    "wires": [["7f4ca40d.4007bc"]]
  },
  {
    "id": "b63db3a2.71d8f",
    "type": "http request",
    "z": "d3290d59.f097d",
    "name": "GET /health",
    "method": "GET",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "",
    "tls": "",
    "persist": false,
    "proxy": "",
    "authType": "",
    "x": 730,
    "y": 140,
    "wires": [[]]
  },
  {
    "id": "88ea5651.4f3b68",
    "type": "http response",
    "z": "d3290d59.f097d",
    "name": "",
    "statusCode": "200",
    "headers": {},
    "x": 500,
    "y": 200,
    "wires": []
  },
  {
    "id": "f1f964df.5fbc38",
    "type": "function",
    "z": "d3290d59.f097d",
    "name": "set url",
    "func": "msg.url = global.get('env').APP_DOMAIN + '/health'\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "x": 590,
    "y": 140,
    "wires": [["b63db3a2.71d8f"]]
  },
  {
    "id": "7f4ca40d.4007bc",
    "type": "change",
    "z": "d3290d59.f097d",
    "name": "set payload",
    "rules": [
      { "t": "set", "p": "payload", "pt": "msg", "to": "ok", "tot": "str" }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 350,
    "y": 200,
    "wires": [["88ea5651.4f3b68"]]
  },
  {
    "id": "409d23db.d5f5bc",
    "type": "switch",
    "z": "d3290d59.f097d",
    "name": "if true or undefined",
    "property": "isActive",
    "propertyType": "flow",
    "rules": [
      { "t": "true" },
      { "t": "istype", "v": "undefined", "vt": "undefined" }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 410,
    "y": 140,
    "wires": [["f1f964df.5fbc38"], ["f1f964df.5fbc38"]]
  }
]
